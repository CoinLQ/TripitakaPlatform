<!--<div class="btn-group layout-btns" id="btn_import_data">-->
    <!--<input type="file" id="file" class="btn btn-default btn-sm layout-full">-->
    <!--&lt;!&ndash;<button type="file" class="btn btn-default btn-sm layout-full">导入</button>&ndash;&gt;-->
<!--</div>-->
<div class="btn-group layout-btns" id="div_import_data">
<el-upload
          ref="upload"
          class="upload-demo"
          :action="uploadUrl()"
          :on-success="handleSuccess"
          :limit=1
          :auto-upload="false"
          name="excel_file"
          :on-change="onChange"
          :before-upload="beforeUpload"
          :on-preview="handlePreview"
          :headers="headers"
          accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,.csv,text/plain"
          :file-list="fileList">
    <!--<div class="el-upload__text">导入</div>-->
    <el-button size="small" type="primary">选择Excel</el-button>
      <el-button style="margin-left: 10px;" size="small" type="success" @click="submitUpload">上传</el-button>


    <!--<el-button style="margin-left: 10px;" size="small" type="success">上传</el-button>-->
               <!--@click="submitUpload"-->

</el-upload>
</div>
<link rel="stylesheet" href="/static/css/element-ui.css" type="text/css">
<!--<div id="app">-->
<!--<el-upload class="upload-demo" action="https://jsonplaceholder.typicode.com/posts/" :on-preview="handlePreview" :on-remove="handleRemove" :before-remove="beforeRemove" multiple :limit="3" :on-exceed="handleExceed" :file-list="fileList">-->
  <!--<el-button size="small" type="primary">点击上传</el-button>-->
  <!--<div slot="tip" class="el-upload__tip">只能上传jpg/png文件，且不超过500kb</div>-->
<!--</el-upload>-->
<!--</div>-->

<script>
$(function () {
    var Main={
    data(){
		return {
			fileList:[],
            headers:{
            }
		}
	},

    methods:{
         uploadUrl(){
            return '/xadmin-api/import_tripitaka_from_excel';
        },
        onChange(file, fileList){
          fileList=this.fileList=[file];
        },
        beforeUpload(file){
             // this.fileList.push(file);
        },
        submitUpload() {
             console.log("submitUpload");
             console.log(this.fileList);
             console.log(this.$refs.upload);
            this.$refs.upload.submit();
        },
         handleSuccess(){
            //上传成功要处理的事
            console.log("handleSuccess");
        },
         handlePreview(){
            //上传前要处理的事
            console.log('handlePreview')
        }
    }
};
    var Ctor = Vue.extend(Main);
    new Ctor().$mount('#div_import_data');
        $(".el-upload__input").css("display","none");

});

</script>
